//  ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓  //
//  ┃ ▄▀▄▀▄▀▄▀▄▀ START OF "Arsenal" ▄▀▄▀▄▀▄▀▄▀ ┃  //
//  ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛  //


/* // ///////////// FILE INFO //////////////// //

Library with my personal weapons,
special stats and loadouts
Made by IronHawk (Tom Crow)

. ...................................... .

  Description

  This library just has some variables
  that minimalize the usage of my
  current arsenal and provide some
  info on their damage.

. ...................................... .

  Importing
    
  var a = new MyArsenal

. ...................................... .

  Usage

  ?foe.debuffs.count = maxIgnitions // example

. ...................................... .

  WARNING:

  There are constant variables that are subject to changes
  depending on the level or state of your arsenal
  (i.e. bladeRDmg). It is recommended to check
  and change these values accordingly for the functions
  to work as intended.

*/


// ///////////////// IMPORTS ///////////////// //

var u = import My/Lib/Utilities
var c = import My/Lib/Combat


// //////////////// VARIABLES //////////////// //

// ************ ITEM ALIASES ************* //

/* .............. RENAMED ..............

Unbroken Faith = sword stone *max (enchanted: speed)
Broken Faith = sword stone *max (enchanted: speed)
Mamba Negra = sword poison D *max (enchanted: speed)
Dothaneel = sword vigor D *max (enchanted: speed)
Void Slayer = sword aether D *max (enchanted: speed)
Vantum Phoenix = sword fire D *max (enchanted: speed)
Bifrost = sword ice D *max (enchanted: speed)

Soulfetcher = sword vigor *max dL +21/ (enchanted: speed and heal chance)

Speedy Hammer = hammer stone *max
Kubikiribocho = bardiche *max (enchanted: crit)
Mjölnir = heavy hammer *max (enchanted: damage)
Guardian's Wrath = heavy hammer *max shiny (enchanted: armor fatigue)

theVwand = wand vigor *max D golden
Frosty Crust = wand ice *max dI

Death's Kiss = sword poison shiny dP (enchanted: P) */

// Elemental

// ............... POISON ............... //

var swordPoisonDebuff = "sword poison *max dP" // enchanted: speed
var swordPoisonDmg = "sword poison -dP *max"
var shieldPoisonDefense = "shield poison *max -ap"
var shieldPoisonBuff = "shield poison *max ap"
var hammerPoisonDefense = "hammer poison *max aP"
var bowPoisonDmg = "bow poison *max -dP"
var bowPoisonDebuff = "bow poison *max dP"
var wandPoisonDmg = "wand poison *max -dP -hidden"
var wandPoisonDebuff = "wand poison *max dP -hidden"
var wandPoisonHidden = "wand poison hidden *max" // aka Plague Wand
var staffPoisonDebuff = "staff poison *max dP -hidden"
var staffPoisonHidden = "staff poison hidden *max" // aka Berserker Staff

// ............... VIGOR ................ //

var swordVigorDmg = "sword vigor *max -dL Spring24"
var swordVigorBuff = "sword vigor *max dL -gold"
var shieldVigorDefense = "shield vigor *max -ah"
var shieldVigorBuff = "shield vigor *max ah"
var hammerVigorBuff = "hammer vigor *max ah"
var bowVigorBuff = "bow vigor *max dL"
var bowVigorDmg = "bow vigor *max -dL"
var wandVigorBuff = "wand vigor *max dL -hidden"
var wandVigorDmg = "wand vigor *max -dL -hidden" // 2nd one
var wandVigorHidden = "wand vigor hidden *max" // aka Reset Wand
var staffVigorBuff = "staff vigor *max dL -hidden"
var staffVigorHidden = "staff vigor hidden *max" // aka Prevention Staff

// ............... AETHER ............... //

var swordAetherDmg = "sword aether -dU *max"
var swordAetherDebuff1 = "sword aether dU *max -big golden"
var swordAetherDebuff2 = "sword aether dU *max -big -golden"
var shieldAetherDefense = "shield aether *max -au"
var shieldAetherDebuff = "shield aether *max au"
var bowAetherDmg = "bow aether *max D"
var wandAetherDebuff = "wand aether *max dU -hidden"
var wandAetherHidden = "wand aether hidden *max" // aka Calamity Wand
var staffAetherDebuff = "staff aether *max dU -hidden"
var staffAetherHidden = "staff aether hidden *max" // aka Grasping Staff

// ................ FIRE ................ //

var swordFireDebuff = "sword fire *max dF"
var swordFireDmg = "sword fire *max -dF"
var shieldFireDefense = "shield fire *max -af"
var shieldFireDebuff = "shield fire *max af"
var hammerFireDefense = "shield fire *max aF"
var bowFireDmg = "bow fire *max -dF"
var bowFireDebuff = "bow fire *max dF"
var wandFireDmg = "wand fire *max -dF -hidden"
var wandFireDebuff = "wand fire *max dF -hidden"
var wandFireHidden = "wand fire hidden *max" // aka Explosive Wand
var staffFireDebuff = "staff fire *max dF -hidden"
var staffFireHidden = "staff fire hidden *max" // aka Infernal Staff

// ................ ICE ................. //

var swordIceDebuff1 = "sword ice *max dI shiny"
var swordIceDebuff2 = "sword ice *max dI -shiny"
var swordIceDmg = "sword ice *max -dI"
var shieldIceDefense = "shield ice *max -ai"
var shieldIceDebuff = "shield ice *max ai"
var hammerIceDefense = "hammer ice *max aI"
var bowIceDmg = "bow ice *max D"
var wandIceDmg = "wand ice *max -dI -hidden"
var wandIceDebuff = "wand ice *max dI +15 -hidden"
var wandIceHidden = "wand ice hidden *max" // aka Frost Wand
var staffIceDebuff = "staff ice *max dI -hidden"
var staffIceHidden = "staff ice hidden *max" // aka Eternity Staff

// ................ STONE ............... //

var shieldStone = "shield stone *max" // enchanted: dodge chance
var bowStone = "bow stone *max"
var wandStoneHidden = "wand stone hidden *max" // aka Gravity Wand
var staffStoneHidden = "staff stone hidden *max" // aka Acrobatic Staff

// ............. ALTERNATE .............. //

var bowAlternate = "bow *max golden"

// .......... SPECIAL WEAPONS ........... //

var shieldDashing = "shield dashing *max HoH24"
var myQuarterstaff = "quarterstaff *max glitched"
var fastBardiche = "bardiche *max" // enchanted: speed
var bowRepeating = "bow repeating *max golden"
var shieldCompound1 = "shield compound *max shiny"
var shieldCompound2 = "shield compound *max -shiny"
var shieldTowering = "shield towering *max golden"

// ............... OTHERS ............... //

var burstingSwords = [
^     Soulfetcher     , swordIceDebuff1,
^     Mamba Negra     , swordPoisonDmg,
^     Dothaneel       , swordVigorDmg,
^     Void Slayer     , swordAetherDmg,
^     Vantum Phoenix  , swordFireDmg,
^     Bifrost         , swordIceDmg
^]

// ************ SPECIAL STATS ************ //

// ........... BUFFS/DEBUFFS ............ //

// amount of damage reduced by dP affix weapons
var weaken_default = 4
var weaken_boosted = 9 // Death's Kiss

// amount of health healed when using an ah affix weapon
var ah_heal = 2

// .......... COMPOUND SHIELD ........... //

var compoundMaxArmor_default = 14
var compoundMaxArmor_boosted = 35

// ............ CULTIST MASK ............ //

var mask_feebleCount = 5 // amount of feeble debuffs the Mask applies
var mask_feebleDmg = 9 // amount of damage each debuff deals to the foe
var mask_feebleReduction = 2 // amount of damage each debuff deducts from the foe

// ...... BLADE OF THE FALLEN GOD ....... //

var blade_Dmg = 310
var blade_RDmg = 170
var smiteDmg = 40 // smite flat bonus damage

// ............ SKELETON ARM ............ //

var armDmg = 56
var armRDmg = armDmg / 2
var maxPickPockets = "pick_pocket:4"

// ............. CINDERWISP ............. //

// multiplied by the amount of Ignition buffs:
var cinderwispDmg_Default = 36
var cinderwispDmg_Boosted = 96
var maxIgnitions_Default = "ignition:10"
var maxIgnitions_Boosted = "ignition:17"

// ............. VOIDWEAVER ............. //

var voidweaverDmg = 1
var voidweaverUnmakeChance = 0.14 // %
var voidweaverArmor = 1.35

// ............ HEAVY HAMMER ............ //

var heavyHammerDmg = 145

// .............. BARDICHE .............. //

/* ************************************* */
/*  WARNING: These stats only apply for  */
/*           [Kubikiribocho]!            */

var bardicheDmg = 52
var bardicheCrit = 13.5
var bardicheRDmg = (bardicheDmg + 17) * bardicheCrit
/* ************************************* */


// //////////////// FUNCTIONS //////////////// //

/* Loadout function.
- Acts as a custom loadout that works with my arsenal.
- Handles most (if not all) situations.
- Accounts for the permapot strategy. */
func ldtF(mode)
  // sanitize entry
  mode = string.ToLower(mode)

  ?mode = "start" | mode = "begin" | mode = "default"
    equipL triskelion
    equipR @shieldCompound1@

  :?mode = "engage"
    ?buffs.string ! "buff_inf_speed" & // infernal staff
    ^totaltime % 2 = 0 // every even frame
      ?foe = "poison"
        equipL @hammerIceDefense@
      :?foe = "vigor"
        equipL @hammerPoisonDefense@
      :?foe = "aether"
        equipL @hammerVigorDefense@
      :?foe = "fire"
        equipL @hammerAetherDefense@
      :?foe = "ice"
        equipL @hammerFireDefense@
      :
        equipL Speedy Hammer
    :
      equipL triskelion

    ?!c.isPermapotSetup
      ?foe ! "immune_to_debuff_chill" &
      ^foe.debuffs.string ! "chill" &
      ^encounter.eliteMod ! "tenacious"
        equipR @shieldIceDebuff@
      :
        ?foe = "poison"
          equipL @shieldIceDefense@
        :?foe = "vigor"
          equipL @shieldPoisonDefense@
        :?foe = "aether"
          equipL @shieldVigorDefense@
        :?foe = "fire"
          equipL @shieldAetherDefense@
        :?foe = "ice"
          equipL @shieldFireDefense@
        :
          equipL @shieldCompound1@
  :?mode = "extend" | mode = "permapot"
    ?item.right ! "bardiche" &
    ^item.right ! "quarterstaff" &
    ^item.right ! "heavy hammer" &
    ^item.right ! "quarterstaff"
      equipL triskelion
      equipR mask
  :?mode = "bash" | mode = "dash"
    ?foe = "poison"
      equipL Bifrost
    :?foe = "vigor"
      equipL Mamba Negra
    :?foe = "aether"
      equipL Dothaneel
    :?foe = "fire"
      equipL Void Slayer
    :?foe = "ice"
      equipL Vantum Phoenix
    :
      equipL Unbroken Faith

    ?mode = "bash"
      equipR bashing shield
    :?mode = "dash"
      equipR @shieldDashing@

  :?mode = "escape" | mode = "mind" | mode = "mindstone"
    equipL mind

    ?!c.isPermapotSetup
      ?foe = "poison"
        equipL @shieldIceDefense@
      :?foe = "vigor"
        equipL @shieldPoisonDefense@
      :?foe = "aether"
        equipL @shieldVigorDefense@
      :?foe = "fire"
        equipL @shieldAetherDefense@
      :?foe = "ice"
        equipL @shieldFireDefense@
      :
        equipL @shieldTowering@
  :?mode = "magnet" | mode = "star" | mode = "star stone"
    equipL star
    ?!c.isPermapotSetup
      equipR triskelion
  :?mode = "harvest"
    ?loc = "rocky_plateau"
      equip shovel
    :?loc = "deadwood_valley"
      equipL moon
      equipR hatchet


  :?mode = "defense" // evade/buff/debuff when hit
    // Special cases (both left and right are dedicated to the loadout's goal)
    ?mode = "heal"
      equipL @hammerVigorBuff@
      ?!c.isPermapotSetup
        equipR @shieldVigorBuff@
    :?mode = "unmake" // unmake when hit
      ?foe.count > 1
        equipL @wandAetherDebuff@
      :
        equipL @swordAetherDebuff1@
      equipR @shieldAetherDebuff@

    :?mode = "regen"
      equipL triskelion

      ?!c.isPermapotSetup
        ?mode = "max" | mode = "slow"
          equipR @shieldCompound1@
        :?mode = "fast"
          equipR @shieldCompound2@

    :
      // Left hand
      ?foe.count > 1
        ?foe = "poison"
          equipL @wandIceDmg@
        :?foe = "vigor"
          equipL @wandPoisonDmg@
        :?foe = "aether"
          equipL @wandVigorDmg@
        :?foe = "fire"
          equipL @wandAetherDmg@
        :?foe = "ice"
          equipL @wandFireDmg@
        : // foe = "stone"
          equipL @wandStoneHidden@
      :
        ?foe = "poison"
          equipL Bifrost
        :?foe = "vigor"
          equipL Mamba Negra
        :?foe = "aether"
          equipL Dothaneel
        :?foe = "fire"
          equipL Void Slayer
        :?foe = "ice"
          equipL Vantum Phoenix
        : // foe = "stone"
          equipL Vantum Phoenix // Unbroken Faith

      // Right hand
      ?mode = "tank"
        equipR @shieldTowering@
      :?mode = "stun"
        equipR @shieldCompound1@

      :?mode = "evade"
        ?foe = "poison"
          equipR @shieldIceDefense@
        :?foe = "vigor"
          equipR @shieldPoisonDefense@
        :?foe = "aether"
          equipR @shieldVigorDefense@
        :?foe = "fire"
          equipR @shieldAetherDefense@
        :?foe = "ice"
          equipR @shieldFireDefense@
        : // foe = "stone"
          equipR @shieldStone@

      :?mode = "buff" | mode = "debuff"
        ?mode = "poison" | mode = "empower"
          equipR @shieldPoisonBuff@
        :?mode = "vigor" | mode = "heal"
          equipR @shieldVigorBuff@
        :?mode = "aether" | mode = "unmake"
          equipR @shieldAetherDebuff@
        :?mode = "fire" | mode = "burn"
          equipR @shieldFireDebuff@
        :?mode = "ice" | mode = "chill"
          equipR @shieldIceDebuff@

  :?mode = "melee"
    ?mode = "aoe" | mode = "splash" // TO DO: big swords
      // Special cases:
      ?mode = "heal"
        ?c.isPermapotSetup
          // equipL 
        :
          ?foe = "poison"
            // c.doMoondial(,)
          :?foe = "vigor"
            // c.doMoondial(,)
          :?foe = "aether"
            // c.doMoondial(,)
          :?foe = "fire"
            // c.doMoondial(,)
          :?foe = "ice"
            // c.doMoondial(,)
          : // foe = "stone"
            // c.doMoondial(,)
      :?mode = "unmake"
        ?c.isPermapotSetup
          // equipL 
        :
          ?foe = "poison"
            // c.doMoondial(,)
          :?foe = "vigor"
            // c.doMoondial(,)
          :?foe = "aether"
            // c.doMoondial(,)
          :?foe = "fire"
            // c.doMoondial(,)
          :?foe = "ice"
            // c.doMoondial(,)
          : // foe = "stone"
            // c.doMoondial(,)
      :?mode = "debuff"
        ?c.isPermapotSetup // all left hand
          ?c.canApplyChill()
            // equipL 
          :?c.canApplyWeaken()
            // equipL 
          :?c.canApplyBurn()
            // equipL 

        : // !c.isPermapotSetup

          // Left hand:
          ?c.canApplyWeaken()
            // equipL 
            //'
          :?c.canApplyBurn()
            // equipL 
          :?c.canApplyChill()
            // equipL 

          // Right hand:
          ?c.canApplyChill()
            // equipR 
      :?mode = "dmg"
        ?c.isPermapotSetup // all left hand
          ?foe = "poison"
            // equipL 
          :?foe = "vigor"
            // equipL 
          :?foe = "aether"
            // equipL 
          :?foe = "fire"
            // equipL 
          :?foe = "ice"
            // equipL 
          : // foe = "stone"
            // equipL 

        : // !c.isPermapotSetup
          ?foe = "poison"
            // c.doMoondial(,)
          :?foe = "vigor"
            // c.doMoondial(,)
          :?foe = "aether"
            // c.doMoondial(,)
          :?foe = "fire"
            // c.doMoondial(,)
          :?foe = "ice"
            // c.doMoondial(,)
          : // foe = "stone"
            // c.doMoondial(,)

    :?mode = "1v1"
      // Special cases:
      ?mode = "heal"
        ?c.isPermapotSetup
          equipL Soulfetcher
        :
          ?foe = "poison"
            c.doMoondial(Bifrost /*swordVigorBuff*/, Soulfetcher)
          :?foe = "vigor"
            c.doMoondial(Mamba Negra /*swordVigorBuff*/, Soulfetcher)
          :?foe = "aether"
            c.doMoondial(Dothaneel /*swordVigorBuff*/, Soulfetcher)
          :?foe = "fire"
            c.doMoondial(Void Slayer /*swordVigorBuff*/, Soulfetcher)
          :?foe = "ice"
            c.doMoondial(Vantum Phoenix /*swordVigorBuff*/, Soulfetcher)
          : // foe = "stone
            c.doMoondial(Vantum Phoenix /*Broken Faith*/ /*swordVigorBuff*/, Soulfetcher)
      :?mode = "unmake"
        equip @staffAetherDebuff@
        /* ?c.isPermapotSetup
          equipL @swordAetherDebuff1@
        :
          // put a 2nd dU sword when we have it
          ?foe = "poison"
            c.doMoondial(swordAetherDebuff1, Bifrost) // swordAetherDebuff2
          :?foe = "vigor"
            c.doMoondial(swordAetherDebuff1, Mamba Negra) // swordAetherDebuff2
          :?foe = "aether"
            c.doMoondial(swordAetherDebuff1, Dothaneel) // swordAetherDebuff2
          :?foe = "fire"
            c.doMoondial(swordAetherDebuff1, Void Slayer) // swordAetherDebuff2
          :?foe = "ice"
            c.doMoondial(swordAetherDebuff1, Vantum Phoenix) // swordAetherDebuff2
          : // foe = "stone
            c.doMoondial(swordAetherDebuff1, Broken Faith)*/ // swordAetherDebuff2
      :?mode = "debuff"
        ?c.isPermapotSetup // all left hand
          ?c.canApplyChill()
            equipL @swordIceDebuff1@
          :?c.canApplyWeaken()
            equipL @swordPoisonDebuff@ // Death's Kiss
            //'
          :?c.canApplyBurn()
            equipL @swordFireDebuff@

        : // !c.isPermapotSetup

          // Left hand:
          ?c.canApplyWeaken()
            equipL @swordPoisonDebuff@ // Death's Kiss
            //'
          :?c.canApplyBurn()
            equipL @swordFireDebuff@
          :?c.canApplyChill()
            equipL @wandIceDebuff@ // @swordIceDebuff2@

          // Right hand:
          ?c.canApplyChill()
            equipR @swordIceDebuff1@
      :?mode = "dmg"
        ?c.isPermapotSetup // all left hand
          ?foe = "poison"
            equipL Bifrost
          :?foe = "vigor"
            equipL Mamba Negra
          :?foe = "aether"
            equipL Dothaneel
          :?foe = "fire"
            equipL Void Slayer
          :?foe = "ice"
            equipL Vantum Phoenix
          : // foe = "stone"
            equipL Vantum Phoenix // Unbroken Faith

        : // !c.isPermapotSetup
          ?foe = "poison"
            c.doMoondial(Bifrost, swordIceDmg)
          :?foe = "vigor"
            c.doMoondial(Mamba Negra, swordPoisonDmg)
          :?foe = "aether"
            c.doMoondial(Dothaneel, swordVigorDmg)
          :?foe = "fire"
            c.doMoondial(Void Slayer, swordAetherDmg)
          :?foe = "ice"
            c.doMoondial(Vantum Phoenix, swordFireDmg)
          : // foe = "stone"
            c.doMoondial(Vantum Phoenix /*Unbroken Faith*/, @swordFireDmg@ /*Broken Faith*/)

  :?mode = "magic" // wands and staves
    ?mode = "heal"
      ?c.isPermapotSetup
        equipL @wandVigorBuff@
      :
        // equip @staffVigorBuff@
        equipL moon
        equipR @wandVigorBuff@
    :?mode = "unmake"
      ?c.isPermapotSetup
        equipL @wandAetherDebuff@
      :
        equip @staffAetherDebuff@
    :?mode = "debuff"
      ?c.isPermapotSetup
        ?c.canApplyChill()
          equipL @wandIceDebuff@
        :?c.canApplyWeaken()
          equipL @wandPoisonDebuff@
        :?c.canApplyBurn()
          equipL @wandFireDebuff@
      :
        ?c.canApplyChill()
          equip @staffIceDebuff@
        :?c.canApplyWeaken()
          equip @staffPoisonDebuff@
        :?c.canApplyBurn()
          equip @staffFireDebuff@

    :?mode = "dmg"
      ?c.isPermapotSetup // all left hand
        ?foe = "poison"
          equipL @wandIceDmg@
        :?foe = "vigor"
          equipL @wandPoisonDmg@
        :?foe = "aether"
          equipL @wandVigorDmg@
        :?foe = "fire"
          equipL @wandAetherDmg@
        :?foe = "ice"
          equipL @wandFireDmg@
        : // foe = "stone"
          equipL @wandIceDebuff@ // @wandStoneDmg@
      : // !c.isPermapotSetup
        equip @bowAetherDmg@

        /* ?foe = "poison"
          equip @staffIceDmg@
        :?foe = "vigor"
          equip @staffPoisonDmg@
        :?foe = "aether"
          equip @staffVigorDmg@
        :?foe = "fire"
          equip @staffAetherDmg@
        :?foe = "ice"
          equip @staffFireDmg@
        : // foe = "stone"
          equip @staffIceDebuff@ // @staffStoneDmg@ */

  :?mode = "ranged" // crossbows
    ?c.isPermapotSetup
      equipL @bowAlternate@

    : // !c.isPermapotSetup
      ?mode = "heal"
        equip @bowVigorBuff@
      :?mode = "unmake"
        equip @bowAetherDebuff@
      :?mode = "debuff"
        ?c.canApplyChill()
          equip @bowIceDebuff@
        :?c.canApplyWeaken()
          equip @bowPoisonDebuff@
        :?c.canApplyBurn()
          equip @bowFireDebuff@

      :?mode = "dmg" // TO DO: Uncomment when we have all D crossbows maxed out
          equip @bowAetherDmg@

          /*?foe = "poison"
            equip @bowIceDmg@
          :?foe = "vigor"
            equip @bowPoisonDmg@
          :?foe = "aether"
            equip @bowVigorDmg@
          :?foe = "fire"
            equip @bowFireDmg@
          :?foe = "ice"
            equip @bowIceDmg@
          : // foe = "stone"
            equip @bowStone@ */

  :
    u.showStrCtr(0,30,#red,"ERROR\nFILE: Arsenal\nFUNCTION: ldtF\nCAUSE: unknown <mode>:\n\n" + mode, false)

  return


//  ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓  //
//  ┃ ▄▀▄▀▄▀▄▀▄▀▄ END OF "Arsenal" ▀▄▀▄▀▄▀▄▀▄▀ ┃  //
//  ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛  //
